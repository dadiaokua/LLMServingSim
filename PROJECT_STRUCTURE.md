# LLMServingSim é¡¹ç›®ç»“æ„

## ğŸ“ æ•´ç†åçš„é¡¹ç›®ç»“æ„

```
LLMServingSim/
â”œâ”€â”€ ğŸš€ llmservingsim              # ä¸»å¯åŠ¨è„šæœ¬ï¼ˆç»Ÿä¸€å…¥å£ï¼‰
â”œâ”€â”€ ğŸ“„ main.py                    # æ ¸å¿ƒä»¿çœŸç¨‹åº
â”œâ”€â”€ ğŸ“„ run.sh                     # åŸå§‹å¯åŠ¨è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ“‚ inference_serving/         # æ ¸å¿ƒæ¨ç†æœåŠ¡æ¨¡å—
â”‚   â”œâ”€â”€ scheduler.py              # è¯·æ±‚è°ƒåº¦å™¨
â”‚   â”œâ”€â”€ request.py                # è¯·æ±‚å’Œæ‰¹æ¬¡ç®¡ç†
â”‚   â”œâ”€â”€ memory_model.py           # å†…å­˜æ¨¡å‹
â”‚   â”œâ”€â”€ http_server.py            # OpenAIå…¼å®¹HTTPæœåŠ¡å™¨
â”‚   â”œâ”€â”€ request_api.py            # è¯·æ±‚APIæ¥å£
â”‚   â”œâ”€â”€ control.py                # ä»¿çœŸæ§åˆ¶å™¨
â”‚   â”œâ”€â”€ generate_trace.py         # æ‰§è¡Œè½¨è¿¹ç”Ÿæˆ
â”‚   â”œâ”€â”€ generate_graph.py         # æ‰§è¡Œå›¾ç”Ÿæˆ
â”‚   â”œâ”€â”€ config_generator.py       # é…ç½®ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ utils.py                  # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ pim.py                    # PIMç›¸å…³åŠŸèƒ½
â”‚
â”œâ”€â”€ ğŸ“‚ tools/                     # ğŸ†• å·¥å…·ç›®å½•ï¼ˆæ–°æ•´ç†ï¼‰
â”‚   â”œâ”€â”€ ğŸ“‚ scripts/               # å¯åŠ¨å’Œè¿è¡Œè„šæœ¬
â”‚   â”‚   â”œâ”€â”€ run_openai_server.sh  # OpenAIæœåŠ¡å™¨å¯åŠ¨è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ run_idle.sh           # ç©ºé—²æ¨¡å¼å¯åŠ¨è„šæœ¬
â”‚   â”‚   â””â”€â”€ demo_curl_response.sh # curlç¤ºä¾‹è„šæœ¬
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ perf_models/           # æ€§èƒ½æ¨¡å‹å·¥å…·
â”‚   â”‚   â”œâ”€â”€ generate_perf_models.py  # ç”Ÿæˆç¡¬ä»¶æ€§èƒ½æ¨¡å‹
â”‚   â”‚   â””â”€â”€ extend_perf_models.py    # æ‰©å±•æ¨¡å‹æ”¯æŒ
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ tests/                 # æµ‹è¯•å·¥å…·
â”‚   â”‚   â”œâ”€â”€ test_openai_api.py    # OpenAI APIæµ‹è¯•
â”‚   â”‚   â””â”€â”€ test_http_api.py      # HTTPæ¥å£æµ‹è¯•
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“„ README.md              # å·¥å…·ç›®å½•è¯´æ˜
â”‚
â”œâ”€â”€ ğŸ“‚ model_configs/             # æ¨¡å‹é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ meta-llama/
â”‚   â”‚   â””â”€â”€ Llama-3.1-8B-Instruct.json
â”‚   â”œâ”€â”€ facebook/
â”‚   â”‚   â””â”€â”€ opt-6.7b.json
â”‚   â””â”€â”€ qwen/
â”‚       â””â”€â”€ Qwen3-8B.json
â”‚
â”œâ”€â”€ ğŸ“‚ perf_model/                # æ€§èƒ½æ¨¡å‹æ•°æ®ï¼ˆğŸ†• æ‰©å±•æ”¯æŒï¼‰
â”‚   â”œâ”€â”€ RTX3090.csv               # åŸå§‹åŸºå‡†æ•°æ®
â”‚   â”œâ”€â”€ A100.csv                  # ğŸ†• A100æ€§èƒ½æ•°æ®
â”‚   â”œâ”€â”€ H100.csv                  # ğŸ†• H100æ€§èƒ½æ•°æ®
â”‚   â”œâ”€â”€ V100.csv                  # ğŸ†• V100æ€§èƒ½æ•°æ®
â”‚   â”œâ”€â”€ RTX4090.csv               # ğŸ†• RTX4090æ€§èƒ½æ•°æ®
â”‚   â”œâ”€â”€ A6000.csv                 # ğŸ†• A6000æ€§èƒ½æ•°æ®
â”‚   â”œâ”€â”€ A40.csv                   # ğŸ†• A40æ€§èƒ½æ•°æ®
â”‚   â”œâ”€â”€ RTX4080.csv               # ğŸ†• RTX4080æ€§èƒ½æ•°æ®
â”‚   â”œâ”€â”€ L40.csv                   # ğŸ†• L40æ€§èƒ½æ•°æ®
â”‚   â”œâ”€â”€ A10.csv                   # ğŸ†• A10æ€§èƒ½æ•°æ®
â”‚   â””â”€â”€ T4.csv                    # ğŸ†• T4æ€§èƒ½æ•°æ®
â”‚
â”œâ”€â”€ ğŸ“‚ astra-sim/                 # ASTRA-Simä»¿çœŸå™¨
â”œâ”€â”€ ğŸ“‚ dataset/                   # æ•°æ®é›†æ–‡ä»¶
â”œâ”€â”€ ğŸ“‚ examples/                  # ç¤ºä¾‹é…ç½®
â”œâ”€â”€ ğŸ“‚ output/                    # è¾“å‡ºç»“æœ
â”œâ”€â”€ ğŸ“‚ llm-profile/               # æ€§èƒ½åˆ†æå·¥å…·
â”œâ”€â”€ ğŸ“‚ trace_test/                # è½¨è¿¹æµ‹è¯•
â”‚
â”œâ”€â”€ ğŸ“„ PROJECT_STRUCTURE.md       # ğŸ†• é¡¹ç›®ç»“æ„è¯´æ˜ï¼ˆæœ¬æ–‡æ¡£ï¼‰
â”œâ”€â”€ ğŸ“„ API_SUMMARY.md             # ğŸ†• APIåŠŸèƒ½æ€»ç»“
â”œâ”€â”€ ğŸ“„ OPENAI_API.md              # ğŸ†• OpenAI APIä½¿ç”¨æŒ‡å—
â”œâ”€â”€ ğŸ“„ README.md                  # é¡¹ç›®ä¸»æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ LICENSE                    # è®¸å¯è¯
â”œâ”€â”€ ğŸ“„ requirements.txt           # Pythonä¾èµ–
â””â”€â”€ ğŸ“„ environment.yml            # Condaç¯å¢ƒé…ç½®
```

## ğŸ¯ ä¸»è¦æ”¹è¿›

### âœ… **æ–‡ä»¶æ•´ç†**
- å°†æ‰€æœ‰å·¥å…·è„šæœ¬ç§»åŠ¨åˆ° `tools/` ç›®å½•
- æŒ‰åŠŸèƒ½åˆ†ç±»ï¼šscripts, perf_models, tests
- åˆ›å»ºç»Ÿä¸€çš„ `llmservingsim` å¯åŠ¨å™¨

### âœ… **æ€§èƒ½æ¨¡å‹æ‰©å±•**
- æ”¯æŒ11ç§ç¡¬ä»¶ç±»å‹
- æ”¯æŒ3ç§æ¨¡å‹æ¶æ„
- æ€»è®¡33ç§é…ç½®ç»„åˆ

### âœ… **OpenAIå…¼å®¹æ€§**
- å®Œæ•´çš„OpenAI APIæ”¯æŒ
- å…¼å®¹ç°æœ‰OpenAIå®¢æˆ·ç«¯
- æ”¯æŒchat/completionså’Œcompletionsç«¯ç‚¹

## ğŸš€ ä½¿ç”¨æ–¹å¼

### **ç»Ÿä¸€å¯åŠ¨å™¨ï¼ˆæ¨èï¼‰**
```bash
# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
./llmservingsim help

# å¯åŠ¨OpenAIæœåŠ¡å™¨
./llmservingsim server --model "qwen/Qwen3-8B" --hardware A100

# ç”Ÿæˆæ€§èƒ½æ¨¡å‹
./llmservingsim setup-perf

# æµ‹è¯•API
./llmservingsim test-api
```

### **ç›´æ¥è°ƒç”¨å·¥å…·**
```bash
# å¯åŠ¨æœåŠ¡å™¨
tools/scripts/run_openai_server.sh --model "qwen/Qwen3-8B" --hardware A100

# ç”Ÿæˆæ€§èƒ½æ¨¡å‹
python3 tools/perf_models/generate_perf_models.py

# æµ‹è¯•API
python3 tools/tests/test_openai_api.py
```

## ğŸ“Š æ”¯æŒçŸ©é˜µ

### **æ¨¡å‹æ”¯æŒ**
- âœ… qwen/Qwen3-8B
- âœ… meta-llama/Llama-3.1-8B-Instruct
- âœ… facebook/opt-6.7b

### **ç¡¬ä»¶æ”¯æŒ**
- âœ… H100 (3.5x) - æœ€å¿«
- âœ… A100 (2.2x) - æ•°æ®ä¸­å¿ƒæ ‡å‡†
- âœ… L40 (1.8x) - ä¸“ä¸šçº§
- âœ… RTX4090 (1.6x) - æ¶ˆè´¹çº§æ——èˆ°
- âœ… A6000 (1.4x) - ä¸“ä¸šçº§
- âœ… A40 (1.3x) - æ•°æ®ä¸­å¿ƒ
- âœ… RTX4080 (1.2x) - æ¶ˆè´¹çº§é«˜ç«¯
- âœ… RTX3090 (1.0x) - åŸºå‡†
- âœ… A10 (0.9x) - ä¸“ä¸šçº§ä¸­ç«¯
- âœ… V100 (0.8x) - æ•°æ®ä¸­å¿ƒç»å…¸
- âœ… T4 (0.4x) - æ¨ç†ä¸“ç”¨

## ğŸ”„ å·¥ä½œæµç¨‹

1. **åˆå§‹åŒ–**: `./llmservingsim setup-perf`
2. **å¯åŠ¨æœåŠ¡**: `./llmservingsim server`
3. **æµ‹è¯•éªŒè¯**: `./llmservingsim test-api`
4. **ä»¿çœŸåˆ†æ**: `./llmservingsim simulate`

ç°åœ¨é¡¹ç›®ç»“æ„æ›´åŠ æ¸…æ™°å’Œæ˜“äºç»´æŠ¤ï¼ğŸ‰
